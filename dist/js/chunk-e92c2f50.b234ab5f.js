(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e92c2f50"],{"3a41":function(t,e,a){},4928:function(t,e,a){"use strict";a("7a40")},"4de9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"books"},[t.loading?a("loading"):a("h3",[t._v(t._s(t.title))]),a("BookList",{attrs:{list:t.books}}),a("h1",[t._v(t._s(t.message))]),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{layout:"total,sizes,prev,pager,next,jumper","page-sizes":[2,10,20,40],"current-page":t.pageNum,"page-size":t.pageSize,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},s=[],i=(a("7f7f"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loading"},[a("div",{staticClass:"shadow"},[a("div",{staticClass:"loader"},[a("div",{staticClass:"mask"})])])])}],r={name:"loading"},c=r,u=(a("981c"),a("2877")),l=Object(u["a"])(c,i,o,!1,null,"68c68748",null),p=l.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.list,(function(t){return a("div",{key:t.id},[a("book-list-item",{attrs:{item:t}})],1)})),0)},g=[],d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bookListItem"},[a("div",[a("img",{attrs:{src:t.item.bigImgUrl}})]),a("p",{staticClass:"title"},[a("router-link",{attrs:{to:{name:"book",params:{id:t.item.id}},target:"_blank"}},[t._v("\n      "+t._s(t.item.title)+"\n      ")])],1),a("p",[a("span",{staticClass:"factPrice"},[t._v("\n          "+t._s(t._f("currency")(t._f("factPrice")(t.item.price,t.item.discount)))+"\n      ")]),a("span",[t._v("\n          定价:"),a("span",{staticClass:"price"},[t._v(t._s(t.item.price))])])]),a("p",[a("span",[t._v(t._s(t.item.author)+"/")]),a("span",[t._v(t._s(t.item.publishDate)+"/")]),a("span",[t._v(t._s(t.item.bookConcern))])]),a("p",[t._v("\n      "+t._s(t.item.brief)+"\n  ")]),a("p",[a("el-button",{staticClass:"addCartButton",attrs:{type:"danger",size:"medium"},on:{click:function(e){return t.addCartItem(t.item)}}},[t._v("加入购物车")])],1)])},m=[],h=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),b=a("2f62");function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function _(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){Object(h["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var k={name:"BookListItem",props:{item:{type:Object,default:function(){}}},methods:_(_({},Object(b["b"])("cart",{addCart:"addProductToCart"})),{},{factprice:function(t,e){return t*e},addCartItem:function(t){var e=1,a=_(_({},t),{},{price:this.factprice(t.price,t.discount),quantity:e});this.addCart(a),this.$router.push("/cart")}})},O=k,C=(a("4928"),Object(u["a"])(O,d,m,!1,null,"54a8b907",null)),y=C.exports,j={name:"BookLIst",props:{list:{type:Array,default:function(){return[]}}},components:{BookListItem:y}},z=j,P=Object(u["a"])(z,f,g,!1,null,null,null),w=P.exports,B={name:"Books",components:{Loading:p,BookList:w},data:function(){return{title:"",books:[],message:"",loading:!0,total:5,pageNum:1,pageSize:2}},methods:{setRequestUrl:function(t){var e=t;return-1!=t.indexOf("/category")&&(e="/book"+e+"/page"),e},getBooks:function(t,e,a){var n=this;this.message="",this.axios.get(t,{params:{pageNum:e,pageSize:a}}).then((function(t){200==t.data.code&&(n.loading=!1,n.books=t.data.data,n.total=t.data.total,0==n.books.length&&("category"==n.$route.name?n.message="当前分类下没有图书":n.message="没有搜索到匹配图书"))})).catch((function(t){return alert(t)}))},handleSizeChange:function(t){this.pageSize=t;var e=this.setRequestUrl(this.$route.fullPath);this.getBooks(e,this.pageNum,this.pageSize)},handleCurrentChange:function(t){this.pageNum=t;var e=this.setRequestUrl(this.$route.fullPath);this.getBooks(e,this.pageNum,this.pageSize)}},beforeRouteEnter:function(t,e,a){console.log("进入"),a((function(e){e.title=t.meta.title,console.log("执行");var a=e.setRequestUrl(t.fullPath);console.log("2"),e.getBooks(a,e.pageNum,e.pageSize),console.log("3")}))},beforeRouteUpdate:function(t,e,a){var n=this.setRequestUrl(t.fullPath);this.getBooks(n,this.pageNum,this.pageSize),a()}},S=B,$=(a("da13"),Object(u["a"])(S,n,s,!1,null,null,null));e["default"]=$.exports},"66aa":function(t,e,a){},"7a40":function(t,e,a){},"7f7f":function(t,e,a){var n=a("86cc").f,s=Function.prototype,i=/^\s*function ([^ (]*)/,o="name";o in s||a("9e1e")&&n(s,o,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},"981c":function(t,e,a){"use strict";a("3a41")},da13:function(t,e,a){"use strict";a("66aa")}}]);
//# sourceMappingURL=chunk-e92c2f50.b234ab5f.js.map