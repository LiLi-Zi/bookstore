{"version":3,"sources":["webpack:///./src/components/BookListItem.vue?3956","webpack:///./src/views/Books.vue?08c3","webpack:///./src/components/Loading.vue?7e58","webpack:///src/components/Loading.vue","webpack:///./src/components/Loading.vue?f931","webpack:///./src/components/Loading.vue","webpack:///./src/components/BookList.vue?9857","webpack:///./src/components/BookListItem.vue?ee52","webpack:///src/components/BookListItem.vue","webpack:///./src/components/BookListItem.vue?db1e","webpack:///./src/components/BookListItem.vue","webpack:///src/components/BookList.vue","webpack:///./src/components/BookList.vue?1aba","webpack:///./src/components/BookList.vue","webpack:///src/views/Books.vue","webpack:///./src/views/Books.vue?1e0b","webpack:///./src/views/Books.vue","webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./src/components/Loading.vue?1687","webpack:///./src/views/Books.vue?5e40"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","title","attrs","books","message","pageNum","pageSize","total","on","handleSizeChange","handleCurrentChange","staticRenderFns","_m","name","component","_l","book","key","id","item","bigImgUrl","params","_f","price","discount","author","publishDate","bookConcern","brief","$event","addCartItem","props","type","default","methods","mapActions","addCart","factprice","quantity","list","components","BookListItem","Loading","BookList","data","loading","setRequestUrl","path","url","getBooks","then","catch","size","current","beforeRouteEnter","to","from","next","console","vm","beforeRouteUpdate","dP","f","FProto","Function","prototype","nameRE","NAME","configurable","get","match","e"],"mappings":"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","file":"js/chunk-e92c2f50.b234ab5f.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookListItem.vue?vue&type=style&index=0&id=54a8b907&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"books\"},[(_vm.loading)?_c('loading'):_c('h3',[_vm._v(_vm._s(_vm.title))]),_c('BookList',{attrs:{\"list\":_vm.books}}),_c('h1',[_vm._v(_vm._s(_vm.message))]),_c('div',{staticClass:\"block\"},[_c('el-pagination',{attrs:{\"layout\":\"total,sizes,prev,pager,next,jumper\",\"page-sizes\":[2,10,20,40],\"current-page\":_vm.pageNum,\"page-size\":_vm.pageSize,\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"loading\"},[_c('div',{staticClass:\"shadow\"},[_c('div',{staticClass:\"loader\"},[_c('div',{staticClass:\"mask\"})])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"loading\">\r\n\t\t<div class=\"shadow\">\r\n\t\t\t<div class=\"loader\">\r\n\t\t\t\t<div class=\"mask\"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n    name:'loading',\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .shadow{\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\tmargin-left: -50px;\r\n\t\tmargin-right: -50px;\r\n\t\tborder-radius: 50%;\r\n\t\tbox-shadow: -2px 2px 10px 0 rgba(0, 0, 0, 0.5),\r\n\t\t\t2px -2px 10px 0 rgba(255,255,255,0.5);\r\n\t}\r\n\t.loader{\r\n\t\tbackground-image: linear-gradient(to left,skyblue 50%,#fafafa 50%);\r\n\t\tborder-radius: 50%;\r\n\t\theight: 100px;\r\n\t\twidth: 100px;\r\n\t\t/*animation:time 8s steps(500, start) infinite;*/\r\n\t\t\r\n\t}\r\n\t.mask{\r\n\t\t\r\n\t\tborder-radius: 50px 0 0 50px;\r\n\t\theight: 100%;\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\twidth: 50%;\r\n\t\tanimation: mask 8s steps(250,start) infinite;\r\n\t\ttransform-origin: 100% 50%;/*改变旋转的中心点x y 默认是50% 50% 0*/\r\n\t} \r\n\t\r\n\t/*@keyframes time{\r\n\t\t100%{\r\n\t\t\ttransform: rotate(360deg);\r\n\t\t}\r\n\t}*/\r\n\t@keyframes mask{\r\n\t\t0%{\r\n\t\t\tbackground-color: #fafafa;\r\n\t\t\ttransform: rotate(0deg);\r\n\t\t}\r\n\t\t50%{\r\n\t\t\tbackground-color: #fafafa;\r\n\t\t\ttransform: rotate(-180deg);\r\n\r\n\t\t}\r\n\t\t50.01%{\r\n\t\t\tbackground-color: skyblue;\r\n\t\t\ttransform: rotate(0deg);\r\n\t\t}\r\n\t\t100%{\r\n\t\t\tbackground-color: skyBlue;\r\n\t\t\ttransform: rotate(-180deg);\r\n\t\t}\r\n\t}\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Loading.vue?vue&type=template&id=68c68748&scoped=true&\"\nimport script from \"./Loading.vue?vue&type=script&lang=js&\"\nexport * from \"./Loading.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Loading.vue?vue&type=style&index=0&id=68c68748&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"68c68748\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._l((_vm.list),function(book){return _c('div',{key:book.id},[_c('book-list-item',{attrs:{\"item\":book}})],1)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bookListItem\"},[_c('div',[_c('img',{attrs:{\"src\":_vm.item.bigImgUrl}})]),_c('p',{staticClass:\"title\"},[_c('router-link',{attrs:{\"to\":{name:'book',params:{id:_vm.item.id}},\"target\":\"_blank\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.item.title)+\"\\n      \")])],1),_c('p',[_c('span',{staticClass:\"factPrice\"},[_vm._v(\"\\n          \"+_vm._s(_vm._f(\"currency\")(_vm._f(\"factPrice\")(_vm.item.price,_vm.item.discount)))+\"\\n      \")]),_c('span',[_vm._v(\"\\n          定价:\"),_c('span',{staticClass:\"price\"},[_vm._v(_vm._s(_vm.item.price))])])]),_c('p',[_c('span',[_vm._v(_vm._s(_vm.item.author)+\"/\")]),_c('span',[_vm._v(_vm._s(_vm.item.publishDate)+\"/\")]),_c('span',[_vm._v(_vm._s(_vm.item.bookConcern))])]),_c('p',[_vm._v(\"\\n      \"+_vm._s(_vm.item.brief)+\"\\n  \")]),_c('p',[_c('el-button',{staticClass:\"addCartButton\",attrs:{\"type\":\"danger\",\"size\":\"medium\"},on:{\"click\":function($event){return _vm.addCartItem(_vm.item)}}},[_vm._v(\"加入购物车\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"bookListItem\">\r\n    <div>\r\n        <img :src=\"item.bigImgUrl\">\r\n    </div>\r\n    <p class=\"title\">\r\n        <router-link :to=\"{name:'book',params:{id:item.id}}\" target=\"_blank\">\r\n        {{item.title}}\r\n        </router-link>\r\n    </p>\r\n    <p>\r\n        <span class=\"factPrice\">\r\n            {{item.price | factPrice(item.discount) | currency }}\r\n        </span>\r\n        <span>\r\n            定价:<span class=\"price\">{{item.price}}</span>\r\n        </span>\r\n    </p>\r\n    <p>\r\n        <span>{{item.author}}/</span>\r\n        <span>{{item.publishDate}}/</span>\r\n        <span>{{item.bookConcern}}</span>\r\n    </p>\r\n    <p>\r\n        {{item.brief}}\r\n    </p>\r\n    <p>\r\n        <el-button class=\"addCartButton\" @click=\"addCartItem(item)\"\r\n          type=\"danger\" size=\"medium\">加入购物车</el-button>\r\n    </p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from 'vuex'\r\nexport default {\r\n    name:\"BookListItem\",\r\n    props:{\r\n        item:{\r\n            type:Object,\r\n            default:()=>{}\r\n        }\r\n    },\r\n    methods:{\r\n        ...mapActions('cart',{//this.addCart() == this.$store.dispatch('addproductToCart')\r\n            addCart:'addProductToCart',\r\n        }),\r\n        factprice(price,discount){\r\n            return price*discount\r\n        },\r\n        addCartItem(item){\r\n            let quantity =1;\r\n            let newItem = {\r\n                ...item,\r\n                price:this.factprice(item.price,item.discount),\r\n                quantity\r\n            };\r\n            this.addCart(newItem);\r\n            this.$router.push('/cart');\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .price{\r\n        text-decoration-line: line-through;\r\n        font-style: italic;\r\n        color:rgb(96, 98, 99);\r\n        margin-left: 0;\r\n    }\r\n\r\n.bookListItem {\r\n  border-bottom: solid 1px #ccc;\r\n  margin-top: 10px;\r\n  margin-left: 30px;\r\n  margin-right: 30px;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n.bookListItem p{\r\n  text-align: left;\r\n}\r\n.bookListItem p span{\r\n  margin-left: 10px;\r\n}\r\n.bookListItem img{\r\n  width: 180px;\r\n  height: 180px;\r\n  float: left;\r\n}\r\n .addCartButton{\r\n  position: absolute;\r\n  bottom: 5px;\r\n}\r\n\r\n\r\n.bookListItem .factPrice{\r\n  color: red;\r\n  font-weight: bold;\r\n}\r\n.bookListItem .title{\r\n  color: #e00;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookListItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookListItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BookListItem.vue?vue&type=template&id=54a8b907&scoped=true&\"\nimport script from \"./BookListItem.vue?vue&type=script&lang=js&\"\nexport * from \"./BookListItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BookListItem.vue?vue&type=style&index=0&id=54a8b907&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54a8b907\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n  <div v-for=\"book in list\" :key=\"book.id\">\r\n    <book-list-item :item=\"book\"></book-list-item>\r\n  </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport BookListItem from './BookListItem.vue'\r\nexport default {\r\nname:\"BookLIst\",\r\nprops:{\r\n    list:{\r\n        type:Array,\r\n        default:()=>[],\r\n    },\r\n},\r\ncomponents: { BookListItem },\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BookList.vue?vue&type=template&id=117a4540&\"\nimport script from \"./BookList.vue?vue&type=script&lang=js&\"\nexport * from \"./BookList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"books\">\r\n    <loading v-if=\"loading\"/>\r\n    <h3 v-else>{{title}}</h3>\r\n    <BookList :list=\"books\" />\r\n    <h1>{{message}}</h1>\r\n    <!-- 使用element-ui实现分页功能 -->\r\n    <div class=\"block\">\r\n    <el-pagination \r\n                            \r\n        layout='total,sizes,prev,pager,next,jumper'     \r\n        @size-change=\"handleSizeChange\"\r\n        :page-sizes=\"[2,10,20,40]\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"pageNum\"\r\n        :page-size=\"pageSize\"\r\n        :total=\"total\"\r\n    >\r\n    </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Loading from '../components/Loading.vue'\r\nimport BookList from '../components/BookList.vue'\r\n\r\nexport default {\r\n    name:\"Books\",\r\n    components: { Loading, BookList },\r\n    data(){\r\n        return{\r\n            title:'',\r\n            books:[],\r\n            message:'',\r\n            loading:true,\r\n            //分页相关数据\r\n            total:5,\r\n            pageNum:1,\r\n            pageSize:2,\r\n        }\r\n    },\r\n    methods:{\r\n        setRequestUrl(path){// 判断路径来自分类还是搜索，分类的接口要加上/book\r\n            let url =path;\r\n           \r\n            if(path.indexOf('/category') != -1){\r\n                url = '/book'+url+'/page';\r\n            }\r\n            return url\r\n        },\r\n        getBooks(url,pageNum,pageSize){//异步请求后台数据\r\n            this.message='';\r\n            this.axios.get(url,{params:{pageNum,pageSize}})\r\n                .then(response=>{\r\n                    if(response.data.code == 200){\r\n                        this.loading=false;\r\n                        this.books = response.data.data;\r\n                        this.total = response.data.total;\r\n                    \r\n                    if(this.books.length == 0){\r\n                        if(this.$route.name=='category'){\r\n                            this.message=\"当前分类下没有图书\";\r\n                        }else{\r\n                            this.message=\"没有搜索到匹配图书\";\r\n                            }\r\n                        } \r\n                    } \r\n                })\r\n                .catch(error=>alert(error));\r\n        },\r\n    \r\n        //当修改了每页显示的条数时，重新请求数据\r\n        handleSizeChange(size){\r\n            this.pageSize = size;\r\n            let url = this.setRequestUrl(this.$route.fullPath);\r\n            this.getBooks(url,this.pageNum,this.pageSize);\r\n        },\r\n        //当用户切换了某一页时，重新请求数据\r\n        handleCurrentChange(current){\r\n            this.pageNum=current;\r\n            let url = this.setRequestUrl(this.$route.fullPath);\r\n            this.getBooks(url,this.pageNum,this.pageSize);\r\n        },\r\n    },\r\n    \r\n        beforeRouteEnter(to,from,next){//采用组件内导航，next传入vm实例在导航确认后调用回调函数，也可以用created加载初始数据\r\n            console.log('进入');\r\n            next(vm=>{\r\n                vm.title = to.meta.title;\r\n                console.log('执行');\r\n                let url = vm.setRequestUrl(to.fullPath);\r\n                console.log('2');\r\n                vm.getBooks(url,vm.pageNum,vm.pageSize);\r\n                console.log('3');\r\n            });\r\n        },\r\n        // created(){\r\n        //     console.log('1');\r\n        //     this.title = this.$route.meta.title;\r\n        //     let url = this.setRequestUrl(this.$route.fullPath);\r\n        //     this.getBooks(url,this.pageNum,this.pageSize); \r\n        //     console.log('执行');\r\n        // },\r\n        beforeRouteUpdate(to,from,next){//搜索途径可能会复用组件所以需要监听路由变化\r\n            let url = this.setRequestUrl(to.fullPath);\r\n            this.getBooks(url,this.pageNum,this.pageSize);\r\n            next();\r\n        },\r\n}\r\n</script>\r\n\r\n<style>\r\n    .books h3{\r\n        text-align: center;\r\n        margin: 10px auto;\r\n    }\r\n\r\n    .books .block{\r\n        text-align: center;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Books.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Books.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Books.vue?vue&type=template&id=df6c5d4c&\"\nimport script from \"./Books.vue?vue&type=script&lang=js&\"\nexport * from \"./Books.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Books.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=style&index=0&id=68c68748&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Books.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}